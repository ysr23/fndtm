<%- model_class = Task -%>
<%= render "index" %>

<% content_for :sideb do %>
  <li class="nav-header">Upcoming</li>
  <table id="tasksTable" class="table table-striped table-condensed">
    <tbody>
      <% @upcoming_tasks.last(5).sort {|a,b| a.task_start <=> b.task_start}.each_with_index do |task| %>
        <tr>
          <td>
            <div id="complete_icon_<%= task.id %>">
              <% if task.completed%> 
                <%= render 'set_uncomplete', :task => task, :size => "icon-2x" %>
              <% else %> 
                <%= render 'set_complete', :task => task, :size => "icon-2x" %> 
              <% end %> 
            </div>
          </td>
          <td><%= link_to task.name, task_path(task) %></td>
          <td><%= distance_of_time_in_words_to_now(task.task_start.to_datetime) + " from now"if task.task_start %></td>
        </tr>
      <% end %>
    </tbody>
  </table>


  <li class="nav-header">Recently Complete</li>
  <table id="RH_completed" class="table table-striped table-condensed complete">
    <tbody>
      <% @completed_tasks.last(5).sort {|a,b| b.completed_at <=> a.completed_at}.each_with_index do |task| %>
        <tr>
          <td>
            <div id="complete_icon_<%= task.id %>">
              <% if task.completed%> 
                <%= render 'set_uncomplete', :task => task, :size => "icon-2x" %>
              <% else %> 
                <%= render 'set_complete', :task => task, :size => "icon-2x" %> 
              <% end %> 
            </div>
          </td>
          <td><%= link_to task.name, task_path(task) %></td>
          <td><%= time_ago_in_words(task.completed_at) + " ago" %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end%>
